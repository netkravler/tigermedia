function validateField(e,t,r,n){if(!r&&!t)return!0;switch(n){default:return!0;case"checkbox":return isOneChecked(e);case"let_and_num_only":return/^[a-zA-ZÆØÅæøåÀ-ž \s{1,}]*$/.test(String(t).toLowerCase());case"not_empty":return!!t;case"let_num_space":return/[a-zA-ZÆØÅæøå0-9À-ž ]/.test(String(t).toLowerCase());case"nonum_text":return/[a-zA-ZÆØÅæøåÀ-ž ]/.test(String(t).toLowerCase());case"email":return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase());case"message":return/^([a-zA-ZÆØÅæøåÀ-ž\s{1,}]){20,}$/.test(String(t).toLowerCase());case"postnummer":return/^([0-9]){4}$/.test(String(t.replace(/ /g,"")).toLowerCase());case"nordjylland":return/^(?:((9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]))|((7[79][0-9]{2}|79[0-8][0-9]|7990)))$/.test(String(t).toLowerCase());case"phonenumber":return/^([0-9]){8}$/.test(String(t.replace(/ /g,"")).toLowerCase());case"cvr":return/^([0-9]){8}$/.test(String(t.replace(/ /g,"")).toLowerCase());case"url":return/^(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})$/.test(String(t).toLowerCase());case"extention":return validateextension(t);case"dato":return/^(0[1-9]|1\d|2\d|3[01])\-(0[1-9]|1[0-2])\-(19|20)\d{2}$/.test(String(t));case"number":return/^([0-9]){1,2}$/.test(String(t))}}function validateextension(e){let t=e.split(".").pop();return!!["png","jpg","jpeg","gif","svg"].includes(t)}function isOneChecked(e){let t=document.querySelectorAll("[name="+e+"]"),r=t.length;for(var n=0;n<t.length;n++){let e=t[n].getAttribute("id");t[n].getAttribute("required");if(document.getElementById(e).checked&&r--,("radio"==t[n].type||"checkbox"==t[n].type)&&r!=t.length)return!0}return!1}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function find_files(e){return e.querySelectorAll("input[type=file]")}function resetMessages(){document.querySelectorAll(".field-msg").forEach(e=>e.classList.remove("show")),document.querySelectorAll(".field-msg_wrong").forEach(e=>e.classList.remove("show"))}function resetForm(e,t){for(i=0;i<t.length;i++)document.body.contains(document.getElementById("uploaded_image"))&&(document.getElementById("uploaded_image").innerHTML=""),e.querySelectorAll('[type="checkbox"]').checked=!1,e.querySelector('[name="'+t[i].getAttribute("name")+'"]').checked=!1,e.querySelector('[name="'+t[i].getAttribute("name")+'"]').value=""}function scroll_IntoView(e){e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}document.addEventListener("DOMContentLoaded",function(e){let t=document.querySelectorAll(".form");for(let e=0;e<t.length;e++){let r=t[e].getElementsByClassName("field-input");t[e].addEventListener("submit",n=>{n.preventDefault(),resetMessages();let s={};for(i=0;i<r.length;i++){let n=r[i].getAttribute("name"),a=t[e].querySelector("[name="+n+"]").value;s[n]=a}for(i=0;i<r.length;i++){let n=r[i].getAttribute("name"),a=r[i].getAttribute("required"),o=r[i].getAttribute("data-type"),l=capitalizeFirstLetter(n);if(!validateField(n,s[n],a,o))return void(s[n]?t[e].querySelector('[data-error="wrongformat'+l+'"]')&&(t[e].querySelector('[data-error="wrongformat'+l+'"]').classList.add("show"),scroll_IntoView(r[i])):t[e].querySelector('[data-error="invalid'+l+'"]')&&(t[e].querySelector('[data-error="invalid'+l+'"]').classList.add("show"),scroll_IntoView(r[i])))}let a=t[e].dataset.url,o=new FormData(t[e]);if(t[e].querySelector('[type="file"]')){let e=$('input[type="file"]')[0].files;for(let t=0;t<e.length;t++)o.append("file"+t,e[t])}$.ajax({url:a,data:o,contentType:!1,processData:!1,type:"POST",success:function(r){resetMessages(),t[e].reset(),t[e].querySelector(".js-form-success").classList.add("show")},error:function(r){resetMessages(),t[e].querySelector(".js-form-error").classList.add("show")}})})}});